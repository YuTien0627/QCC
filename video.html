<!DOCTYPE html>
<html lang="zh-TW">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>QCC å½±éŸ³ä¸‹è¼‰ä¸­è½‰é </title>
  <!-- Tailwind CDN -->
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    body {
      font-family: 'Inter', system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
      background: radial-gradient(circle at top, #ccfbf1 0, #ecfeff 35%, #f9fafb 100%);
    }
    .loading-spinner {
      border: 4px solid #e5e7eb;
      border-top: 4px solid #0d9488;
      border-radius: 9999px;
      width: 26px;
      height: 26px;
      animation: spin 1s linear infinite;
    }
    @keyframes spin {
      to { transform: rotate(360deg); }
    }
  </style>
</head>
<body class="min-h-screen flex items-center justify-center px-4 py-8">
  <div class="max-w-xl w-full">
    <!-- å¡ç‰‡ -->
    <div class="bg-white/90 backdrop-blur shadow-2xl rounded-2xl border border-teal-100 overflow-hidden">
      <!-- é ‚éƒ¨æ¢ -->
      <div class="bg-gradient-to-r from-teal-600 via-teal-500 to-emerald-500 px-6 py-4 flex items-center justify-between">
        <div class="flex items-center space-x-2">
          <span class="inline-flex items-center justify-center w-8 h-8 rounded-full bg-white/10 text-white text-lg">
            â–¶
          </span>
          <div>
            <p class="text-sm text-teal-100">Chi Mei QCC ç·šä¸Šå­¸ç¿’</p>
            <h1 class="text-lg font-semibold text-white">å½±éŸ³ä¸‹è¼‰ä¸­è½‰é </h1>
          </div>
        </div>
      </div>

      <!-- å…§å®¹å€ -->
      <div class="px-6 py-6 space-y-5" id="content">
        <!-- æœƒç”± JS å‹•æ…‹å¡«å…¥ -->
        <div class="flex items-center space-x-3 text-gray-600">
          <div class="loading-spinner"></div>
          <span class="text-sm">æ­£åœ¨æº–å‚™æ‚¨çš„ä¸‹è¼‰é€£çµï¼Œè«‹ç¨å€™â€¦</span>
        </div>
      </div>

      <!-- åº•éƒ¨èªªæ˜ -->
      <div class="px-6 pt-4 pb-5 border-t border-gray-100 bg-gray-50/60 text-xs text-gray-500 leading-relaxed">
        æé†’ï¼šå¯¦éš›æ˜¯å¦ã€Œç›´æ¥ä¸‹è¼‰ã€ä»æœƒå—ä¼ºæœå™¨è¨­å®šï¼ˆContent-Typeï¼Content-Dispositionï¼‰
        åŠç€è¦½å™¨ç‰ˆæœ¬å½±éŸ¿ã€‚è‹¥é»æ“Šå¾Œæ˜¯ç·šä¸Šæ’­æ”¾ç•«é¢ï¼Œå¯å˜—è©¦ï¼š
        <span class="font-medium text-gray-700">å³éµ â†’ã€Œé€£çµå¦å­˜æ–°æª”ã€</span> æˆ–è¤‡è£½ç¶²å€åˆ°æ–°åˆ†é è²¼ä¸Šå¾Œä¸‹è¼‰ã€‚
      </div>
    </div>
  </div>

  <script>
    function getVideoUrlFromQuery() {
      try {
        const params = new URLSearchParams(window.location.search);
        const raw = params.get('url');
        if (!raw) return null;
        return decodeURIComponent(raw);
      } catch (e) {
        console.error('è§£æç¶²å€åƒæ•¸éŒ¯èª¤ï¼š', e);
        return null;
      }
    }

    function buildVideoCard(videoUrl) {
      const content = document.getElementById('content');
      if (!videoUrl) {
        content.innerHTML = `
          <div class="space-y-4">
            <h2 class="text-lg font-semibold text-red-600 flex items-center">
              <span class="inline-flex items-center justify-center w-7 h-7 rounded-full bg-red-100 text-red-600 mr-2">!</span>
              ç„¡æ³•å–å¾—å½±ç‰‡ç¶²å€
            </h2>
            <p class="text-sm text-gray-600">
              ç¶²å€æ²’æœ‰å¸¶å…¥æ­£ç¢ºçš„ <span class="font-mono bg-gray-100 px-1 py-0.5 rounded text-xs">?url=...</span> åƒæ•¸ã€‚<br>
              è«‹å¾ã€ŒQCC æ–°æ‰‹å…¥é–€äº’å‹•æŒ‡å—ã€ç¶²ç«™ä¸­çš„ã€Œåƒè€ƒè³‡æ–™ã€é é¢é‡æ–°é»é¸å½±ç‰‡é€£çµã€‚
            </p>
          </div>
        `;
        return;
      }

      // å¾ç¶²å€æŠ“ä¸€å€‹çœ‹èµ·ä¾†åƒæª”åçš„å­—ä¸²
      let fileName = videoUrl.split('?')[0].split('#')[0].split('/').pop() || 'QCC æ•™å­¸å½±ç‰‡';
      // çµ¦ä¸€å€‹æ¯”è¼ƒå‹å–„çš„æ¨™é¡Œï¼ˆå¯è¦–éœ€è¦å†èª¿ï¼‰
      const prettyName = decodeURIComponent(fileName);

      content.innerHTML = `
        <div class="space-y-5">
          <div>
            <h2 class="text-xl font-bold text-gray-800 mb-1 flex items-center">
              <span class="inline-flex items-center justify-center w-8 h-8 rounded-full bg-teal-100 text-teal-700 mr-2">
                ğŸ¬
              </span>
              æº–å‚™ä¸‹è¼‰å½±ç‰‡
            </h2>
            <p class="text-sm text-gray-600">
              æ‚¨å³å°‡ä¸‹è¼‰ï¼é–‹å•Ÿçš„æª”æ¡ˆï¼š
            </p>
            <p class="mt-2 text-sm font-mono bg-gray-100 px-3 py-2 rounded border border-gray-200 overflow-x-auto">
              ${prettyName}
            </p>
          </div>

          <!-- ä¸‹è¼‰æŒ‰éˆ• -->
          <div class="space-y-3">
            <a href="${videoUrl}"
               class="inline-flex items-center justify-center w-full px-4 py-3 rounded-xl text-sm font-semibold text-white bg-teal-600 hover:bg-teal-700 shadow-md hover:shadow-lg transition duration-150 ease-in-out">
              <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"
                   xmlns="http://www.w3.org/2000/svg">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                      d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1M8 12l4 4m0 0l4-4m-4 4V4" />
              </svg>
              ä¸‹è¼‰å½±ç‰‡ï¼ˆæˆ–é–‹å•Ÿæ’­æ”¾ï¼‰
            </a>
            <p class="text-xs text-gray-500">
              è‹¥é»æ“Šå¾Œæ˜¯ã€Œç·šä¸Šæ’­æ”¾ç•«é¢ã€ï¼Œå¯ä»¥åœ¨æ’­æ”¾ç•«é¢ä¸Šæ–¹ç¶²å€åˆ—å³éµè¤‡è£½ï¼Œ
              æˆ–å›åˆ°æ­¤é é¢æ”¹ç”¨ä¸‹æ–¹çš„å½±ç‰‡ç¶²å€è‡ªè¡Œè²¼åˆ°æ–°åˆ†é ä¸‹è¼‰ã€‚
            </p>
          </div>

          <!-- é¡¯ç¤ºåŸå§‹ç¶²å€ï¼Œæ–¹ä¾¿è¤‡è£½è²¼ä¸Š -->
          <div class="space-y-2">
            <p class="text-xs font-medium text-gray-700 flex items-center">
              <span class="inline-flex items-center justify-center w-5 h-5 rounded-full bg-amber-100 text-amber-700 mr-1 text-xs">
                i
              </span>
              å½±ç‰‡åŸå§‹ç¶²å€ï¼ˆå¯è¤‡è£½å¾Œè²¼åˆ°æ–°åˆ†é ï¼‰ï¼š
            </p>
            <div class="flex items-start space-x-2">
              <textarea
                class="flex-1 text-xs font-mono bg-gray-50 border border-gray-200 rounded-lg px-3 py-2 text-gray-700 resize-y min-h-[60px]"
                readonly
              >${videoUrl}</textarea>
            </div>
          </div>
        </div>
      `;
    }

    (function init() {
      const url = getVideoUrlFromQuery();
      buildVideoCard(url);
    })();
  </script>
</body>
</html>
