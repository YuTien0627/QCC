<!DOCTYPE html>
<html lang="zh-TW">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>å“ç®¡å·¥å…·é¸å“ªæ‹›ï¼Ÿè·Ÿæˆ‘èµ°ï¼ - å–®å¡ç‰ˆ</title>
<script src="https://cdn.tailwindcss.com"></script>
<script>
tailwind.config = {
    theme: {
        extend: {
            fontFamily: {
                sans: ['Inter', 'Noto Sans TC', 'sans-serif'],
            },
            colors: {
                'primary-pink': '#F472B6',
                'secondary-purple': '#A78BFA',
                'goal-green': '#34D399',
                'issue-red': '#F87171',
                'card-yellow': '#FFFBEB',
                'card-white': '#ffffff'
            }
        }
    }
}
</script>

<style>
body {
    font-family: 'Inter', 'Noto Sans TC', sans-serif;
    background: transparent;
    margin: 0;
    padding: 0;
}

#app {
    max-width: 4xl;
    margin: 2rem auto;
    padding: 2rem;
    border-radius: 2rem;
}

.header-title {
    text-align: center;
    margin-bottom: 2rem;
}

.header-title h1 {
    font-size: 3rem;
    font-weight: 800;
    color: #1f2937;
}

.header-title p {
    font-size: 1.25rem;
    color: #4b5563;
}

#history-trail {
    position: sticky;
    top: 0;
    background: #ffffff;
    z-index: 20;
    padding: 0.5rem 1rem;
    border-bottom: 2px solid #e5e7eb;
    display: flex;
    flex-wrap: wrap;
    gap: 0.5rem;
}

.breadcrumb-node {
    display: flex;
    align-items: center;
    background: #A78BFA;
    color: #fff;
    padding: 0.25rem 0.75rem;
    border-radius: 9999px;
    font-size: 0.875rem;
    font-weight: 600;
    cursor: pointer;
}

.breadcrumb-node-active { background: #F472B6; }
.breadcrumb-node-result { background: #F472B6; color: #1f2937; }

.decision-card {
    transition: transform 0.3s ease, box-shadow 0.3s ease;
    margin-top: 2rem;
    border-radius: 2rem;
}

.btn {
    @apply px-12 py-8 rounded-full font-extrabold text-7xl md:text-8xl transition duration-300 shadow-lg border-b-4 border-opacity-70;
    white-space: normal;
}
.btn-pink { @apply bg-primary-pink text-white border-primary-pink/80 hover:bg-pink-500 hover:border-pink-600 active:translate-y-1 active:shadow-sm; }
.btn-purple { @apply bg-secondary-purple text-white border-secondary-purple/80 hover:bg-violet-500 hover:border-violet-600 active:translate-y-1 active:shadow-sm; }
.btn-reset { @apply bg-gray-400 text-white border-gray-500 hover:bg-gray-500 hover:border-gray-600 active:translate-y-1 active:shadow-sm text-base; }

.fun-question-card { box-shadow: 10px 10px 0 0 #F472B6, 15px 15px 0 0 #A78BFA; transition: all 0.2s ease-out; }
.fun-question-card:hover { transform: translate(-2px, -2px); box-shadow: 12px 12px 0 0 #F472B6, 17px 17px 0 0 #A78BFA; }

</style>
</head>

<body class="flex justify-center p-4">

<div id="app" class="bg-transparent p-6 md:p-12 border-4 border-primary-pink/30 shadow-2xl rounded-3xl">

    <!-- æ¨™é¡Œ -->
    <header class="header-title">
        <h1>ğŸ› ï¸ å“ç®¡å·¥å…·é¸å“ªæ‹›ï¼Ÿè·Ÿæˆ‘èµ°ï¼ ğŸ’¡</h1>
        <p>å–®å¡æ¨¡å¼ï¼Œå°ˆæ³¨ç•¶å‰å•é¡Œï¼</p>
    </header>

    <!-- æ­·å²é ç°½ / breadcrumb -->
    <div id="history-trail"></div>

    <!-- é¡Œç›®å¡ç‰‡å€ -->
    <div id="question-card-container"></div>

    <!-- é‡ç½®æŒ‰éˆ• -->
    <div class="mt-8 pt-4 border-t border-gray-200 text-center">
        <button class="btn btn-reset px-6 py-3" onclick="navigate('Q1')">ğŸ”„ é‡ç½®æŒ‘æˆ°</button>
    </div>

</div>

<script>
const decisionTree = {
    Q1: { 
        title: "ğŸ¾ é—œå¡ä¸€ï¼šæŒ‘æˆ°é¡å‹", 
        question: "æ‚¨æƒ³è™•ç†çš„æ˜¯ã€Œã€å·²ç¶“ç™¼ç”Ÿã€‘çš„éº»ç…©äº‹/å£çµæœã€ (å•é¡Œå‹)ï¼Ÿé‚„æ˜¯ã€æœªä¾†æƒ³é”æˆã€‘çš„æ–°æˆå°±/å¥½æ°´æº– (èª²é¡Œå‹)ï¼Ÿ", 
        icon: "ğŸ¤”", 
        options: [
            { text: "ğŸ˜­ ç¾æœ‰ç¼ºå¤±æˆ–ç•°å¸¸ (å•é¡Œè§£æ±ºå‹)", next: "Q2", style: "btn-pink" },
            { text: "ğŸ¤© æœªä¾†ç›®æ¨™æˆ–ä»»å‹™ (èª²é¡Œé”æˆå‹)", next: "R_GOAL", style: "btn-purple" }
        ]
    },
    Q2: { 
        title: "ğŸš¨ é—œå¡äºŒï¼šé é˜²æˆ–è§£æ±º", 
        question: "æ‚¨çš„ç›®æ¨™æ˜¯ã€Œã€é å…ˆã€‘é˜»æ­¢æµç¨‹ä¸­ã€æ½›åœ¨ã€‘çš„é¢¨éšªç™¼ç”Ÿã€å—ï¼Ÿ (åƒæ‰“é é˜²é‡ä¸€æ¨£)", 
        icon: "ğŸ›¡ï¸", 
        options: [
            { text: "ğŸ¯ æ˜¯ï¼Œé å…ˆè©•ä¼°èˆ‡æ§åˆ¶é¢¨éšª (é é˜²é‡)", next: "R_HFMEA", style: "btn-purple" },
            { text: "ğŸ¤• å¦ï¼Œåˆ†æå·²ç¶“ç™¼ç”Ÿçš„å•é¡Œ (è§£æ¯’åŠ‘)", next: "Q3", style: "btn-pink" }
        ]
    },
    Q3: { 
        title: "ğŸ’¥ é—œå¡ä¸‰ï¼šäº‹ä»¶åš´é‡æ€§", 
        question: "é€™å€‹å•é¡Œæ˜¯ã€Œã€è¶…ç´šåš´é‡ã€‘çš„é‡å¤§/ä¸è‰¯äº‹ä»¶ã€ï¼Œæ‚¨éœ€è¦æ‰¾å‡ºã€ç³»çµ±æ€§çš„æœ€çµ‚åŸå› ã€‘ä¸¦ã€ä¿è­‰ä¸å†ç™¼ç”Ÿã€‘å—ï¼Ÿ", 
        icon: "ğŸ”", 
        options: [
            { text: "ğŸš€ æ˜¯ï¼Œè¿½æŸ¥æ ¹æœ¬åŸå›  (é‡å¤§ä¸è‰¯äº‹ä»¶)", next: "R_RCA", style: "btn-purple" },
            { text: "ğŸ§¹ å¦ï¼Œä¸€èˆ¬æ€§ç¼ºå¤±æ”¹å–„ (æ—¥å¸¸å“è³ªæå‡)", next: "R_QCC", style: "btn-pink" }
        ]
    },
    R_GOAL: { title: "ğŸ‰ æ­å–œï¼æ‚¨æ‰¾åˆ°äº†æˆåŠŸé‘°åŒ™ï¼", methodology: "ğŸ’¡ èª²é¡Œé”æˆå‹ (Goal-Achievement)", purpose: "é€™æ–¹æ³•å°ˆé–€å¹«åŠ©æ‚¨å¾ã€Œç¾åœ¨ã€èµ°åˆ°ã€Œç›®æ¨™ã€ã€‚é‡é»æ˜¯ã€ç™¼æ®å‰µæ„æ‰¾æ–¹æ³•ã€‘ï¼Œé”æˆæ‚¨çš„ KPI æˆ–æŒ‘æˆ°ï¼", icon: "ğŸ†" },
    R_HFMEA: { title: "ğŸ’– é¢¨éšªé˜²è­·ç½©å·²å•Ÿå‹•ï¼", methodology: "ğŸ›¡ï¸ HFMEA", purpose: "å®ƒèƒ½å¹«åŠ©æ‚¨åœ¨é¢¨éšªç™¼ç”Ÿå‰ï¼Œæ‰¾åˆ°æµç¨‹ä¸­æ‰€æœ‰å¯èƒ½çš„ã€Œåœ°é›·ã€ä¸¦æå‰æ§åˆ¶ï¼", icon: "ğŸš¨" },
    R_RCA: { title: "ğŸ•µï¸â€â™‚ï¸ ç³»çµ±åµæ¢å‡ºå‹•ï¼", methodology: "ğŸ” RCA", purpose: "æ‰¾å‡ºå•é¡Œçš„Root Causeï¼Œç¢ºä¿ä¸å†ç™¼ç”Ÿ", icon: "ğŸ¤¯" },
    R_QCC: { title: "ğŸ› ï¸ æ—¥å¸¸å„ªåŒ–å°ˆå®¶å°±æ˜¯æ‚¨ï¼", methodology: "âœ¨ QCC", purpose: "å¼•å°æ‚¨ç³»çµ±åŒ–ã€Œæ‰¾åŸå›  â†’ è§£æ±ºåŸå› ã€ï¼Œæå‡ç¾æ³å“è³ªï¼", icon: "ğŸŒˆ" }
};

let currentStepKey = "Q1";
let history = [];

const historyTrailDiv = document.getElementById('history-trail');
const questionCardContainer = document.getElementById('question-card-container');

function getStepTitle(key) {
    if (key === 'Q1') return "æŒ‘æˆ°é¡å‹";
    if (key === 'Q2') return "é é˜²æˆ–è§£æ±º";
    if (key === 'Q3') return "äº‹ä»¶åš´é‡æ€§";
    return "æœ€çµ‚çµæœ";
}

function renderCompletedNode(item, index) {
    const stepTitle = getStepTitle(item.key);
    const stepNumber = index + 1;
    return `
        <div class="flex items-center">
            <button class="breadcrumb-node" onclick="rewindToStep('${item.key}')">
                <span class="mr-2">${stepNumber}. ${stepTitle}</span>
            </button>
            <span class="text-secondary-purple mx-1.5 text-2xl font-bold">Â»</span>
        </div>
    `;
}

function renderCurrentQuestion(step, stepKey) {
    const stepNumber = stepKey.replace('Q', '');
    return `
        <div class="bg-card-yellow p-8 md:p-12 rounded-3xl shadow-2xl border-4 border-primary-pink/50 w-full decision-card fun-question-card">
            <div class="text-center mb-8">
                <span class="text-6xl mb-4 block">${step.icon}</span>
                <h2 class="text-2xl md:text-4xl font-extrabold text-gray-800">${stepNumber}. ${step.title}</h2>
            </div>
            <div class="text-2xl text-gray-700 mb-10 p-6 md:p-8 bg-card-white border-4 border-primary-pink rounded-2xl shadow-inner font-medium leading-relaxed text-center">
                ${step.question}
            </div>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6 md:gap-8">
                ${step.options.map(option => `
                    <div class="p-5 rounded-2xl shadow-xl border-4 hover:shadow-2xl transition duration-300 transform hover:-translate-y-0.5 ${option.style==='btn-pink'?'bg-primary-pink/10 border-primary-pink/30':'bg-secondary-purple/10 border-secondary-purple/30'}">
                        <button class="btn w-full ${option.style}" onclick="navigate('${option.next}', '${stepKey}', '${option.text}')">${option.text}</button>
                    </div>
                `).join('')}
            </div>
        </div>
    `;
}

function renderFinalResult(result) {
    return `
        <div class="bg-card-yellow p-6 md:p-12 rounded-3xl shadow-2xl border-t-8 border-primary-pink w-full decision-card">
            <div class="text-center mb-6">
                <span class="text-8xl mb-4 block">${result.icon}</span>
                <h2 class="text-4xl md:text-5xl font-extrabold text-primary-pink mb-4">${result.title}</h2>
                <div class="inline-block bg-card-white p-4 rounded-xl border-4 border-dashed border-primary-pink shadow-lg">
                   <p class="text-2xl md:text-4xl font-extrabold text-gray-800">
                        âœ… å»ºè­°æ¡ç”¨ï¼š${result.methodology}
                    </p>
                </div>
            </div>
            <div class="bg-card-white p-6 rounded-xl border-2 border-primary-pink/50 shadow-inner mb-8">
                <h3 class="text-xl font-bold text-gray-800 mb-3 border-b-2 pb-2">ğŸ¯ ç›®çš„èˆ‡é‡é»æ‘˜è¦</h3>
                <p class="text-xl text-gray-600 leading-relaxed">${result.purpose}</p>
            </div>
        </div>
    `;
}

function renderLadder() {
    const historyHtml = history.map(renderCompletedNode).join('');
    const isResult = currentStepKey.startsWith('R_');
    let currentStepText = isResult ? 'æœ€çµ‚æ¨è–¦' : `${history.length + 1}. ${getStepTitle(currentStepKey)} (é€²è¡Œä¸­)`;
    let currentStepClass = isResult ? 'breadcrumb-node-result' : 'breadcrumb-node-active';

    historyTrailDiv.innerHTML = historyHtml + `<div class="flex items-center"><span class="breadcrumb-node ${currentStepClass}">${currentStepText}</span></div>`;

    questionCardContainer.innerHTML = '';
    const stepData = decisionTree[currentStepKey];
    if (currentStepKey.startsWith('R_')) {
        questionCardContainer.innerHTML = renderFinalResult(stepData);
    } else if (stepData) {
        questionCardContainer.innerHTML = renderCurrentQuestion(stepData, currentStepKey);
    } else {
        questionCardContainer.innerHTML = `<div class="text-red-500 text-center p-10">éŒ¯èª¤ï¼šæ‰¾ä¸åˆ°æ­¥é©Ÿ ${currentStepKey}</div>`;
    }

    // æ»¾å‹•åˆ°å…§å®¹æœ€ä¸Šæ–¹
    document.getElementById('app').scrollIntoView({ behavior: 'smooth', block: 'start' });
}

function navigate(nextState, questionKey, selectedText) {
    if (questionKey && decisionTree[questionKey]) {
        history.push({ key: questionKey, selection: nextState, text: selectedText });
    } else if (nextState === 'Q1') {
        history = [];
    }
    currentStepKey = nextState;
    renderLadder();
}

function rewindToStep(targetKey) {
    const targetIndex = history.findIndex(item => item.key === targetKey);
    if (targetIndex !== -1) {
        history = history.slice(0, targetIndex);
        navigate(targetKey);
    }
}

(function init() { navigate('Q1'); })();
</script>

</body>
</html>
