<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>QCC çŸ¥è­˜æ ¸å¿ƒæ¸¬é©—ï½œå“ç®¡åœˆæ–°æ‰‹ç·´åŠŸæˆ¿</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            font-family: 'Inter', system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
            background-color: #ecfdf5; /* å’Œ index.html ä¸€è‡´çš„è–„ç¶ åº• */
        }

        /* ä¸»è¦å¡ç‰‡é™°å½±èˆ‡åœ“è§’ï¼Œé¢¨æ ¼è²¼è¿‘ index */
        .main-card {
            border-radius: 1.5rem;
            box-shadow: 0 20px 40px rgba(15, 118, 110, 0.15);
        }

        /* å¯æ„›æŒ‰éˆ•æ•ˆæœã€ä½†æ”¹æˆé’ç¶ ç³» */
        .cute-button {
            transition: transform 0.15s, box-shadow 0.15s, background-color 0.15s;
        }
        .cute-button:hover:not(:disabled) {
            transform: scale(1.03);
            box-shadow: 0 8px 15px rgba(45, 212, 191, 0.55);
        }
        .cute-button:active:not(:disabled) {
            transform: scale(0.98);
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }

        /* é¸é … hover æ•ˆæœï¼šæŸ”å’Œã€è²¼è¿‘é¦–é è‰²ç³» */
        .answer-option {
            transition: all 0.2s ease-out;
            cursor: pointer;
            box-shadow: 0 4px 6px -1px rgba(15, 23, 42, 0.06);
        }
        .answer-option:hover:not(.selected) {
            transform: translateY(-2px);
            background-color: #fef3c7; /* æ·ºé»ƒè‰² */
            border-color: #f97316;    /* æ©˜è‰²é‚Šæ¡† */
            box-shadow: 0 6px 12px rgba(245, 158, 11, 0.35);
        }

        /* æ­£ç¢º/éŒ¯èª¤ç­”æ¡ˆè¦–è¦ºæ¨™è¨˜ */
        .correct-answer {
            background-color: #d1fae5; /* æ·ºç¶  */
            border-color: #22c55e;     /* ç¶  */
            box-shadow: 0 0 15px rgba(34, 197, 94, 0.7);
        }
        .incorrect-answer {
            background-color: #fee2e2; /* æ·ºç´… */
            border-color: #f87171;     /* ç´… */
            box-shadow: 0 0 15px rgba(248, 113, 113, 0.7);
        }
    </style>
</head>
<body class="min-h-screen antialiased">

    <div class="max-w-4xl mx-auto p-4 sm:p-6 lg:p-8">
        <!-- é ‚éƒ¨æ¨™é¡Œï¼šé¢¨æ ¼å°é½Š index header -->
        <header class="bg-white shadow-xl rounded-2xl border-t-8 border-teal-600 px-6 py-8 mb-8 text-center">
            <h1 class="text-3xl sm:text-4xl font-extrabold text-gray-900 flex items-center justify-center mb-2">
                <span class="mr-3 text-3xl">ğŸ§ </span>
                QCC çŸ¥è­˜æ ¸å¿ƒæ¸¬é©—
            </h1>
            <p class="text-base sm:text-lg text-gray-600">
                æŒ‘æˆ°è‡ªæˆ‘ï¼Œæª¢è¦–æ‚¨å° <span class="font-semibold text-teal-600">QCC ä¹å¤§æ­¥é©Ÿ</span> çš„æŒæ¡åº¦ï¼
            </p>
            <p class="mt-2 inline-flex items-center px-3 py-1 rounded-full bg-teal-50 text-sm text-teal-700 border border-teal-200">
                ğŸ‘¶ æ–°æ‰‹å‹å–„å°æ¸¬é©— Â· å»ºè­°å…ˆå¾é¦–é å¿«é€Ÿç€è¦½ä¹å¤§æ­¥é©Ÿå†ä¾†æŒ‘æˆ°
            </p>
        </header>

        <!-- æ¸¬é©—ä¸»å¡ç‰‡ -->
        <div class="bg-white main-card px-5 sm:px-8 py-6 sm:py-8">
            
            <!-- é€²åº¦æ¢ -->
            <section class="mb-6">
                <div class="text-sm sm:text-base font-semibold mb-2 text-teal-700 flex flex-col sm:flex-row sm:items-center sm:justify-between gap-1">
                    <span>
                        ç•¶å‰æ­¥é©Ÿï¼š
                        <span id="step-name" class="font-black text-teal-800">æº–å‚™é–‹å§‹</span>
                    </span>
                    <span>
                        é€²åº¦ï¼š
                        <span id="question-index">0</span> / <span id="total-questions">0</span>
                    </span>
                </div>
                <div class="w-full bg-gray-100 rounded-full h-2 shadow-inner overflow-hidden">
                    <div id="progress-bar"
                         class="h-2 bg-gradient-to-r from-teal-500 via-emerald-400 to-lime-400 rounded-full transition-all duration-500"
                         style="width: 0%"></div>
                </div>
            </section>

            <!-- å•é¡Œå®¹å™¨ -->
            <section id="question-container" class="bg-teal-50 border-2 border-teal-200 p-5 sm:p-6 rounded-2xl shadow-inner mb-6">
                <h2 id="quiz-question" class="text-lg sm:text-xl md:text-2xl font-bold text-gray-800">
                    é»æ“Šä¸‹æ–¹æŒ‰éˆ•é–‹å§‹æ¸¬é©—ï¼
                </h2>
            </section>

            <!-- é¸é …å€å¡Š -->
            <section id="quiz-options" class="space-y-4 mb-6 text-base sm:text-lg">
                <!-- é¸é …æœƒç”± JS å‹•æ…‹ç”¢ç”Ÿ -->
            </section>
            
            <!-- å›é¥‹å€å¡Š -->
            <section id="quiz-feedback"
                     class="mb-6 p-4 rounded-xl text-white font-bold hidden text-base sm:text-lg shadow-lg">
            </section>

            <!-- ä¸»æŒ‰éˆ• -->
            <div class="flex justify-center">
                <button id="main-action-btn"
                        class="cute-button px-8 sm:px-10 py-3 sm:py-4 text-lg sm:text-xl text-white font-black rounded-full shadow-md bg-teal-500 hover:bg-teal-600 disabled:bg-gray-400">
                    é–‹å§‹æ¸¬é©—ï¼
                </button>
            </div>
        </div>

        <!-- é è…³ï¼šç°¡å–®å°é½Šé¦–é èªæ°£ -->
        <footer class="mt-6 text-center text-xs sm:text-sm text-gray-500">
            <p class="mb-1">
                ğŸ“Œ å°æé†’ï¼šå»ºè­°æ­é…ã€Œå“ç®¡åœˆï¼ˆQCCï¼‰æ–°æ‰‹å…¥é–€äº’å‹•æŒ‡å—ã€é¦–é ä¸€åŒä½¿ç”¨ï¼Œæ•ˆæœæ›´ä½³ã€‚
            </p>
            <p>&copy; 2025 QCC çŸ¥è­˜æ ¸å¿ƒæ¸¬é©—ï½œå°ˆæ³¨æ–¼ PDCA ä¹å¤§æ­¥é©Ÿæ¦‚å¿µç·´åŠŸ</p>
        </footer>
    </div>

    <script>
        // ====== QCC ä¹å¤§æ­¥é©Ÿé¡Œåº«ï¼ˆå…§å®¹åŒåŸæª”ï¼Œåƒ…æ’ç‰ˆå¾®èª¿ï¼‰ ======
        const QCC_STEPS = [
            {
                id: 1, name: "ä¸»é¡Œé¸å®š (Theme Selection)",
                quiz: [
                    {
                        question: "ä¸‹åˆ—å“ªä¸€é …ä¸»é¡Œè¨­å®šæ–¹å¼ï¼Œæœ€ç¬¦åˆ QCC ä¸»é¡Œé¸å®šä¸­çš„ã€å…·é«”åŒ–ã€åŸå‰‡ï¼Ÿ",
                        options: [
                            { text: "ç›¡åŠ›æå‡ç”¢å“å“è³ªã€‚", isCorrect: false, rationale: "é€™æ˜¯ä¸€å€‹å®šæ€§æè¿°ï¼Œç„¡æ³•è¡¡é‡ï¼Œä¸å…·é«”ã€‚" },
                            { text: "å°‡é›¶ä»¶ A çš„ä¸è‰¯ç‡å¾ 5% é™è‡³ 2.5%ï¼Œç›®æ¨™æ”¹å–„ç‡ 50%ã€‚", isCorrect: true, rationale: "é€™å€‹ç›®æ¨™å…·æœ‰æ˜ç¢ºçš„é‡åŒ–æŒ‡æ¨™ï¼ˆä¸è‰¯ç‡ã€5%è‡³2.5%ï¼‰å’Œæ”¹å–„ç‡ï¼Œç¬¦åˆSMARTåŸå‰‡ã€‚" },
                            { text: "å„ªåŒ–æ‰€æœ‰éƒ¨é–€çš„å·¥ä½œæµç¨‹ã€‚", isCorrect: false, rationale: "ç¯„åœéå¤§ä¸”æ¨¡ç³Šï¼Œç¼ºä¹å–®ä¸€ç„¦é»å’Œè¡¡é‡æŒ‡æ¨™ã€‚" },
                            { text: "æ¸›å°‘å®¢æˆ¶æŠ•è¨´ã€‚", isCorrect: false, rationale: "ç›®æ¨™é›–ç„¶æœ‰æ–¹å‘ï¼Œä½†æœªå°‡ã€æ¸›å°‘ã€é‡åŒ–ç‚ºå…·é«”çš„æ•¸å€¼ã€‚" }
                        ]
                    },
                    {
                        question: "è‹¥åœˆæœƒä½¿ç”¨ã€ä¸»é¡Œä¸€è¦½è¡¨ã€æ±ºå®šä¸»é¡Œï¼Œä¸‹åˆ—å“ªä¸€å€‹ã€è©•åƒ¹é …ç›®ã€çš„å®šç¾©æœ€å…·é«”å®¢è§€ï¼Ÿ",
                        options: [
                            { text: "åœˆèƒ½åŠ› 5 åˆ†ï¼šåœˆå“¡è¦ºå¾—è‡ªå·±å¯ä»¥å®Œæˆã€‚", isCorrect: false, rationale: "ã€è¦ºå¾—ã€æ˜¯ä¸»è§€åˆ¤æ–·ï¼Œæ‡‰å…·é«”åˆ°çŸ¥è­˜ã€æ™‚é–“ã€äººåŠ›çš„å…·å‚™ç¨‹åº¦ã€‚" },
                            { text: "è¿«åˆ‡æ€§ 1 åˆ†ï¼šçŸ­æœŸå…§ä¸æ”¹å–„ä¹Ÿä¸æœƒé€ æˆå•é¡Œã€‚", isCorrect: true, rationale: "é€™æ¸…æ¥šå®šç¾©äº†æœ€ä½åˆ†æ¨™æº–ï¼Œæä¾›äº†å®¢è§€çš„åˆ¤æ–·ä¾æ“šï¼ˆæ™‚é–“/å½±éŸ¿ï¼‰ã€‚" },
                            { text: "é‡è¦æ€§ 3 åˆ†ï¼šä¸»ç®¡èªç‚ºä¸­ç­‰é‡è¦ã€‚", isCorrect: false, rationale: "ä»ä¾è³´ä¸»ç®¡çš„ä¸»è§€åˆ¤æ–·ï¼Œæ‡‰èˆ‡å“è³ªã€æ•ˆç‡çš„ã€å¯¦éš›æ”¹å–„å¹…åº¦ã€æ›é‰¤ã€‚" },
                            { text: "å¯è¡Œæ€§ 5 åˆ†ï¼šæ‰‹é‚Šçš„è³‡æºå’ŒæŠ€è¡“å°±è¶³å¤ å®Œæˆé€™å€‹å°ç›®æ¨™ï¼", isCorrect: false, rationale: "ã€å¯¦æ–½é›£åº¦æœ€ä½ã€æ‡‰å…·é«”èªªæ˜ç‚ºã€å®Œå…¨å¯ç”±åœˆå“¡åœ¨æ™‚ç¨‹å…§é”æˆã€ã€‚" }
                        ]
                    }
                ]
            },
            {
                id: 2, name: "ç¾ç‹€æŠŠæ¡ (Grasping the Status Quo)",
                quiz: [
                    {
                        question: "é€²è¡Œã€ç¾ç‹€æŠŠæ¡ã€æ™‚ï¼Œåœˆæœƒè§€å¯Ÿåˆ°ä¸è‰¯é …ç›® A ä½”ç¸½ä¸è‰¯çš„ 75%ï¼ŒB ä½” 15%ï¼ŒC ä½” 5%ã€‚æ ¹æ“šæŸæ‹‰åœ–åŸå‰‡ï¼Œåœˆæœƒä¸‹ä¸€æ­¥æ‡‰å„ªå…ˆé—œæ³¨å“ªå€‹é …ç›®ï¼Ÿ",
                        options: [
                            { text: "ä¸è‰¯é …ç›® Bï¼Œå› ç‚ºå®ƒæœ‰æ½›åŠ›æ”¹å–„ã€‚", isCorrect: false, rationale: "æŸæ‹‰åœ–åŸå‰‡å¼·èª¿é›†ä¸­è³‡æºè§£æ±ºå°‘æ•¸é—œéµå•é¡Œã€‚" },
                            { text: "ä¸è‰¯é …ç›® Cï¼Œå› ç‚ºå®ƒä½”æ¯”æœ€å°ï¼Œæœ€å®¹æ˜“æ”¹å–„ã€‚", isCorrect: false, rationale: "æ‡‰å„ªå…ˆè™•ç†é€ æˆæœ€å¤§å½±éŸ¿çš„é …ç›®ã€‚" },
                            { text: "ä¸è‰¯é …ç›® Aï¼Œå› ç‚ºå®ƒä»£è¡¨äº†ã€å°‘æ•¸é—œéµã€ï¼Œå½±éŸ¿æœ€å¤§ã€‚", isCorrect: true, rationale: "A ä½” 75%ï¼Œæ˜¯é€ æˆå•é¡Œçš„ä¸»è¦é …ç›®ï¼Œæ‡‰å„ªå…ˆèšç„¦ï¼Œç¬¦åˆæŸæ‹‰åœ–çš„äºŒå…«æ³•å‰‡ã€‚" },
                            { text: "æ‰€æœ‰é …ç›®åŒæ™‚é€²è¡Œï¼Œä»¥ç¢ºä¿å…¨é¢æ”¹å–„ã€‚", isCorrect: false, rationale: "QCC è³‡æºæœ‰é™ï¼Œæ‡‰é–å®šé‡é»ã€‚" }
                        ]
                    },
                    {
                        question: "åœˆæœƒåœ¨åˆ†æã€ç¾ç‹€æŠŠæ¡ã€çš„æ•¸æ“šæ™‚ï¼Œç™¼ç¾æ‰€æœ‰å•é¡Œæ•¸æ“šæœªæŒ‰æ©Ÿå°ã€ç­æ¬¡é€²è¡Œåˆ†é¡æ•´ç†ã€‚é€™é•åäº†å“ªä¸€ç¨®å¸¸è¦‹çš„çµ±è¨ˆåˆ†ææ–¹æ³•ï¼Ÿ",
                        options: [
                            { text: "ç›´æ–¹åœ– (Histogram)", isCorrect: false, rationale: "ç›´æ–¹åœ–ç”¨æ–¼å±•ç¤ºæ•¸æ“šåˆ†ä½ˆï¼Œèˆ‡åˆ†é¡ç„¡ç›´æ¥é—œä¿‚ã€‚" },
                            { text: "å±¤åˆ¥æ³• (Stratification)", isCorrect: true, rationale: "å±¤åˆ¥æ³•æ˜¯å°‡æ•¸æ“šä¾ä¸åŒè®Šå› ï¼ˆå¦‚æ™‚é–“ã€åœ°é»ã€äººå“¡ã€æ©Ÿå°ï¼‰åˆ†é¡ï¼Œä»¥ä¾¿æ‰¾å‡ºå•é¡Œçš„çœŸæ­£ä¾†æºã€‚" },
                            { text: "ç®¡åˆ¶åœ– (Control Chart)", isCorrect: false, rationale: "ç®¡åˆ¶åœ–ç”¨æ–¼ç›£æ§éç¨‹çš„ç©©å®šæ€§ã€‚" },
                            { text: "æ•£ä½ˆåœ– (Scatter Diagram)", isCorrect: false, rationale: "æ•£ä½ˆåœ–ç”¨æ–¼åˆ†æå…©ç¨®è®Šæ•¸é–“çš„ç›¸é—œæ€§ã€‚" }
                        ]
                    }
                ]
            },
            {
                id: 3, name: "ç›®æ¨™è¨­å®š (Setting the Goal)",
                quiz: [
                    {
                        question: "è‹¥ç¾ç‹€ä¸è‰¯ç‡ç‚º 10%ï¼Œåœˆæœƒè¨­å®šç›®æ¨™ç‚ºå°‡ä¸è‰¯ç‡é™è‡³ 4%ã€‚è«‹å•å…¶é è¨ˆæ”¹å–„ç‡æ‡‰ç‚ºå¤šå°‘ï¼Ÿ",
                        options: [
                            { text: "40%", isCorrect: false, rationale: "é€™æ˜¯éŒ¯èª¤çš„ç®—æ³•ï¼Œæ”¹å–„ç‡çš„è¨ˆç®—æ–¹å¼ç‚ºï¼ˆç¾ç‹€å€¼ - ç›®æ¨™å€¼ï¼‰/ ç¾ç‹€å€¼ã€‚" },
                            { text: "60%", isCorrect: true, rationale: "æ”¹å–„ç‡ = (10% - 4%) / 10% = 6% / 10% = 0.6ï¼Œå³ 60%ã€‚" },
                            { text: "6%", isCorrect: false, rationale: "6% æ˜¯æ¸›å°‘çš„çµ•å°å€¼ï¼Œè€Œéæ”¹å–„ç‡ã€‚" },
                            { text: "50%", isCorrect: false, rationale: "ç›®æ¨™é™è‡³ 4%ä¸¦éæ˜¯ç¾ç‹€å€¼çš„ä¸€åŠã€‚" }
                        ]
                    },
                    {
                        question: "åœˆæœƒæå‡ºçš„ç›®æ¨™æ˜¯ã€é¡¯è‘—æé«˜å®¢æˆ¶æ»¿æ„åº¦ã€ã€‚é€™é•åäº†ç›®æ¨™è¨­å®šä¸­çš„å“ªä¸€é …åŸå‰‡ï¼Ÿ",
                        options: [
                            { text: "åˆç†æ€§åŸå‰‡", isCorrect: false, rationale: "åˆç†æ€§æ˜¯æŒ‡ç›®æ¨™å€¼æ˜¯å¦å¯é”æˆï¼Œèˆ‡æè¿°æ–¹å¼ç„¡ç›´æ¥é—œä¿‚ã€‚" },
                            { text: "è¨ˆç®—æ”¹å–„ç‡åŸå‰‡", isCorrect: false, rationale: "æ”¹å–„ç‡æ˜¯è¨ˆç®—å‡ºä¾†çš„çµæœï¼Œä¸æ˜¯åŸå‰‡æœ¬èº«ã€‚" },
                            { text: "å¯è¡¡é‡æ€§åŸå‰‡", isCorrect: true, rationale: "ã€é¡¯è‘—æé«˜ã€å±¬æ–¼å®šæ€§æè¿°ï¼Œç¼ºä¹å®¢è§€çš„æ•¸å­—è¡¡é‡æ¨™æº–ï¼Œç„¡æ³•ç¢ºèªæ˜¯å¦é”æˆã€‚" },
                            { text: "å¯è¡Œæ€§åŸå‰‡", isCorrect: false, rationale: "å¯è¡Œæ€§æŒ‡æŠ€è¡“ä¸Šæ˜¯å¦èƒ½åšåˆ°ã€‚" }
                        ]
                    }
                ]
            },
            {
                id: 4, name: "è¦å› è§£æ (Cause Analysis)",
                quiz: [
                    {
                        question: "åœˆæœƒå°‡ã€çœŸå› ã€éŒ¯èª¤åœ°æ­¸å’æ–¼ã€ä½œæ¥­å“¡ä¸å°ˆå¿ƒã€ã€‚é€™çŠ¯äº†è¦å› è§£æçš„å“ªç¨®éŒ¯èª¤ï¼Ÿ",
                        options: [
                            { text: "ç¼ºä¹ç³»çµ±æ€§ï¼Œæ²’æœ‰ä½¿ç”¨é­šéª¨åœ–ã€‚", isCorrect: false, rationale: "é­šéª¨åœ–æ˜¯æ‰¾å‡ºå¯èƒ½åŸå› çš„å·¥å…·ï¼Œä½†ã€ä½œæ¥­å“¡ä¸å°ˆå¿ƒã€æ˜¯æœªèƒ½ç¹¼çºŒå‘ä¸‹æŒ–æ˜çš„åŸå› ã€‚" },
                            { text: "å°‡ã€ç¾è±¡ã€è¦–ç‚ºã€çœŸå› ã€ã€‚", isCorrect: true, rationale: "ã€ä½œæ¥­å“¡ä¸å°ˆå¿ƒã€æ˜¯è¡¨è±¡æˆ–çµæœï¼ŒçœŸæ­£çš„çœŸå› å¯èƒ½æ˜¯è¨“ç·´ä¸è¶³ã€æµç¨‹è¨­è¨ˆä¸è‰¯ã€æˆ–ç’°å¢ƒåµé›œç­‰ã€‚" },
                            { text: "å°ç­–æ“¬å®šä¸å…·é«”ã€‚", isCorrect: false, rationale: "é€™æ˜¯ä¸‹ä¸€æ­¥çš„å•é¡Œã€‚" },
                            { text: "æ•¸æ“šæ¡é›†ä¸è¶³ã€‚", isCorrect: false, rationale: "æ•¸æ“šæ¡é›†æ˜¯ç¾ç‹€æŠŠæ¡æ­¥é©Ÿçš„å•é¡Œã€‚" }
                        ]
                    },
                    {
                        question: "ä½¿ç”¨é­šéª¨åœ–ï¼ˆIshikawa Diagramï¼‰é€²è¡Œè¦å› è§£ææ™‚ï¼Œå…¶ä¸»è¦çš„ç›®çš„æ˜¯ä»€éº¼ï¼Ÿ",
                        options: [
                            { text: "è¨ˆç®—å„åŸå› æ‰€ä½”çš„ç™¾åˆ†æ¯”ã€‚", isCorrect: false, rationale: "é€™æ˜¯æŸæ‹‰åœ–çš„åŠŸèƒ½ã€‚" },
                            { text: "å°‡çœŸå› æ­¸é¡åˆ° 4M1E æˆ– 5M1E ç­‰ä¸»è»¸ä¸­ï¼Œç¢ºä¿ç³»çµ±æ€§åœ°æ‰¾å‡ºæ‰€æœ‰ã€å¯èƒ½åŸå› ã€ã€‚", isCorrect: true, rationale: "é­šéª¨åœ–çš„ä¸»è¦ç›®çš„æ˜¯ç³»çµ±æ€§åœ°æ‰¾å‡ºä¸¦çµæ§‹åŒ–æ‰€æœ‰å¯èƒ½çš„åŸå› ï¼ˆéª¨ï¼‰ã€‚" },
                            { text: "ç›´æ¥é©—è­‰çœŸå› ä¸¦è¨ˆç®—æ”¹å–„å¾Œçš„æ•ˆç›Šã€‚", isCorrect: false, rationale: "é©—è­‰çœŸå› æ˜¯é­šéª¨åœ–å¾ŒçºŒæ­¥é©Ÿï¼Œæ•ˆç›Šè¨ˆç®—æ˜¯æ•ˆæœç¢ºèªçš„æ­¥é©Ÿã€‚" },
                            { text: "é æ¸¬å°ç­–å¯¦æ–½å¾Œå¯èƒ½ç”¢ç”Ÿçš„é¢¨éšªã€‚", isCorrect: false, rationale: "é€™æ˜¯ PDPC æ³•çš„åŠŸèƒ½ã€‚" }
                        ]
                    }
                ]
            },
            {
                id: 5, name: "å°ç­–æ“¬å®š (Countermeasure Planning)",
                quiz: [
                    {
                        question: "çœŸå› æ˜¯ã€æ©Ÿå°æ¸…æ½”æ¨™æº–ä¸ä¸€è‡´ã€ï¼Œä¸‹åˆ—å“ªå€‹å°ç­–æœ€ç¬¦åˆã€æ²»æœ¬ã€åŸå‰‡ï¼Ÿ",
                        options: [
                            { text: "æ¯é€±å¤šå®‰æ’ä¸€æ¬¡æ¸…æ½”äººå“¡ã€‚", isCorrect: false, rationale: "é€™æ²»æ¨™ä¸æ²»æœ¬ï¼Œæ²’æœ‰è§£æ±ºæ¨™æº–ä¸ä¸€è‡´çš„å•é¡Œã€‚" },
                            { text: "åˆ¶å®šã€æ©Ÿå°æ¸…æ½”æ¨™æº–ä½œæ¥­æŒ‡å°æ›¸ (SOP)ã€ï¼Œä¸¦é€²è¡Œå…¨å“¡è¨“ç·´ï¼Œç¢ºä¿ä¸€è‡´æ€§ã€‚", isCorrect: true, rationale: "é€™å€‹å°ç­–ç›´æ¥è§£æ±ºäº†çœŸå› ã€æ¨™æº–ä¸ä¸€è‡´ã€ï¼Œç¬¦åˆæ²»æœ¬åŸå‰‡ã€‚" },
                            { text: "è³¼è²·æ–°çš„æ©Ÿå°ã€‚", isCorrect: false, rationale: "æˆæœ¬éé«˜ä¸”æœªé‡å°æ¸…æ½”æ¨™æº–å•é¡Œæœ¬èº«ã€‚" },
                            { text: "å°ä¸åˆæ ¼çš„æ¸…æ½”çµæœé€²è¡Œæ‡²ç½°ã€‚", isCorrect: false, rationale: "åƒ…é€éæ‡²ç½°ä¸¦ä¸èƒ½å»ºç«‹ä¸€è‡´çš„æ¨™æº–ã€‚" }
                        ]
                    },
                    {
                        question: "åœ¨ã€å°ç­–æ“¬å®šã€éšæ®µï¼Œåœˆæœƒæ‡‰åŸºæ–¼å“ªä¸‰å€‹æ ¸å¿ƒç¶­åº¦ä¾†è©•ä¼°ä¸¦é¸å®šæœ€çµ‚å°ç­–ï¼Ÿ",
                        options: [
                            { text: "åœˆå“¡èƒ½åŠ›ã€ä¸»ç®¡åå¥½ã€å¯¦æ–½é›£æ˜“åº¦ã€‚", isCorrect: false, rationale: "ä¸»ç®¡åå¥½å’Œé›£æ˜“åº¦ä¸æ˜¯å®¢è§€è©•ä¼°çš„æ ¸å¿ƒã€‚" },
                            { text: "æˆæœ¬ã€æ™‚é–“ã€äººå“¡ã€‚", isCorrect: false, rationale: "æ™‚é–“å’Œäººå“¡æ˜¯å¯¦æ–½è¨ˆåŠƒçš„è¦ç´ ï¼Œéè©•ä¼°ç¶­åº¦ã€‚" },
                            { text: "æ•ˆç›Šã€æˆæœ¬ã€å¯è¡Œæ€§ (æˆ–æŠ€è¡“é›£åº¦)ã€‚", isCorrect: true, rationale: "æ•ˆç›Šï¼ˆæ•ˆæœï¼‰ã€æˆæœ¬ï¼ˆè³‡æºï¼‰ã€å¯è¡Œæ€§ï¼ˆæŠ€è¡“æˆ–å¯¦æ–½é›£åº¦ï¼‰æ˜¯è©•ä¼°å°ç­–çš„ä¸‰å¤§é—œéµç¶­åº¦ã€‚" },
                            { text: "å‰µæ–°åº¦ã€ç¾è§€åº¦ã€å ±å‘Šå®Œæ•´æ€§ã€‚", isCorrect: false, rationale: "é€™äº›èˆ‡ QCC çš„å¯¦è³ªæ”¹å–„ç›®æ¨™ç„¡é—œã€‚" }
                        ]
                    }
                ]
            },
            {
                id: 6, name: "å°ç­–å¯¦æ–½ (Countermeasure Implementation)",
                quiz: [
                    {
                        question: "å°ç­–å¯¦æ–½éç¨‹ä¸­ï¼Œåœˆæœƒç™¼ç¾æŸé …å°ç­–åœ¨åŸå®šæ™‚é–“å…§ç„¡æ³•å®Œæˆã€‚æ­£ç¢ºçš„æ‡‰å°æ–¹å¼æ˜¯ä»€éº¼ï¼Ÿ",
                        options: [
                            { text: "ç›´æ¥è·³éè©²å°ç­–ï¼Œé€²è¡Œä¸‹ä¸€å€‹æ­¥é©Ÿã€‚", isCorrect: false, rationale: "æ‡‰å®Œæˆæ‰€æœ‰å°ç­–ä»¥ç¢ºä¿æ”¹å–„æ•ˆæœï¼Œä¸æ‡‰ç›´æ¥è·³éã€‚" },
                            { text: "ä¸åšä»»ä½•è¨˜éŒ„ï¼Œç¹¼çºŒæ‹–å»¶ç›´åˆ°å®Œæˆã€‚", isCorrect: false, rationale: "éç¨‹è¨˜éŒ„æ˜¯æ­¤æ­¥é©Ÿçš„é—œéµï¼Œæ‡‰è¨˜éŒ„è®Šå‹•æƒ…æ³ã€‚" },
                            { text: "ç«‹å³å¬é–‹æœƒè­°ï¼Œæª¢è¨åŸå› ã€èª¿æ•´æ™‚ç¨‹ï¼Œä¸¦åœ¨å ±å‘Šä¸­å®Œæ•´è¨˜éŒ„æ­¤è®Šå‹•ã€‚", isCorrect: true, rationale: "æ‡‰å°å•é¡Œä¸¦è¨˜éŒ„è®Šå‹•ï¼Œé«”ç¾ PDCA çš„ç²¾ç¥ã€‚" },
                            { text: "è‡ªè¡Œç¸®æ¸›å°ç­–å…§å®¹ï¼Œåªå®Œæˆç°¡å–®çš„éƒ¨åˆ†ã€‚", isCorrect: false, rationale: "éš¨æ„ç¸®æ¸›æœƒå½±éŸ¿æ”¹å–„æ•ˆæœã€‚" }
                        ]
                    },
                    {
                        question: "å°ç­–å¯¦æ–½å¾Œï¼Œåœˆæœƒæ‡‰æ”¶é›†çš„æ•¸æ“šé¡å‹ä¸»è¦æ˜¯ç”¨ä¾†é€²è¡Œå“ªå€‹æ­¥é©Ÿçš„æº–å‚™ï¼Ÿ",
                        options: [
                            { text: "è¦å› è§£æ (Cause Analysis)", isCorrect: false, rationale: "è¦å› è§£æåœ¨å‰ã€‚" },
                            { text: "ç¾ç‹€æŠŠæ¡ (Grasping the Status Quo)", isCorrect: false, rationale: "ç¾ç‹€æŠŠæ¡åœ¨å‰ã€‚" },
                            { text: "æ•ˆæœç¢ºèª (Effect Confirmation)", isCorrect: true, rationale: "å°ç­–å¯¦æ–½å¾Œæ”¶é›†çš„æ•¸æ“šæ˜¯ç”¨ä¾†é‡åŒ–æ”¹å–„æˆæœï¼Œå³ä¸‹ä¸€éšæ®µçš„æ•ˆæœç¢ºèªã€‚" },
                            { text: "æ¨™æº–åŒ– (Standardization)", isCorrect: false, rationale: "æ¨™æº–åŒ–åœ¨æ•ˆæœç¢ºèªå¾Œã€‚" }
                        ]
                    }
                ]
            },
            {
                id: 7, name: "æ•ˆæœç¢ºèª (Effect Confirmation)",
                quiz: [
                    {
                        question: "åœˆæœƒç™¼ç¾æ”¹å–„å¾Œçš„ä¸è‰¯ç‡è¶¨å‹¢åœ–æ²’æœ‰æ¨™è¨»ã€ç›®æ¨™ç·šã€ã€‚é€™å¯èƒ½å°è‡´ä»€éº¼å•é¡Œï¼Ÿ",
                        options: [
                            { text: "ç„¡æ³•è¨ˆç®—æœ‰å½¢æ•ˆç›Šã€‚", isCorrect: false, rationale: "æœ‰å½¢æ•ˆç›Šçš„è¨ˆç®—ä¸ä¾è³´æ–¼åœ–ä¸Šçš„ç›®æ¨™ç·šã€‚" },
                            { text: "ç„¡æ³•é€²è¡Œæ©«å‘å±•é–‹ã€‚", isCorrect: false, rationale: "æ©«å‘å±•é–‹æ˜¯æ¨™æº–åŒ–çš„å•é¡Œã€‚" },
                            { text: "ç„¡æ³•ç›´è§€åˆ¤æ–·æˆæœæ˜¯å¦é”åˆ°é æœŸç›®æ¨™ï¼Œé›£ä»¥èªªæœå¯©æ ¸è€…ã€‚", isCorrect: true, rationale: "ç›®æ¨™ç·šæ˜¯æ•ˆæœç¢ºèªåœ–è¡¨çš„æ ¸å¿ƒï¼Œç”¨æ–¼å°‡å¯¦éš›æˆæœèˆ‡è¨­å®šç›®æ¨™é€²è¡Œè¦–è¦ºåŒ–å°æ¯”ã€‚" },
                            { text: "æ•¸æ“šæ”¶é›†æ™‚é–“ä¸è¶³ã€‚", isCorrect: false, rationale: "é€™æ˜¯æ•¸æ“šæ¡é›†çš„å•é¡Œï¼Œèˆ‡æ¨™è¨»ç„¡é—œã€‚" }
                        ]
                    },
                    {
                        question: "é™¤äº†ä¸è‰¯ç‡çš„æ”¹å–„å¤–ï¼Œä¸‹åˆ—å“ªä¸€é …å±¬æ–¼ QCC æ´»å‹•çš„ã€ç„¡å½¢æ•ˆç›Šã€ï¼Ÿ",
                        options: [
                            { text: "æ¯å¹´ç¯€çœçš„ææ–™æˆæœ¬ã€‚", isCorrect: false, rationale: "å±¬æ–¼æœ‰å½¢æ•ˆç›Šã€‚" },
                            { text: "æå‡äº†åœˆæœƒæˆå“¡çš„å•é¡Œè§£æ±ºèƒ½åŠ›èˆ‡åœ˜éšŠå£«æ°£ã€‚", isCorrect: true, rationale: "å£«æ°£ã€çŸ¥è­˜æå‡ã€æºé€šæ”¹å–„ç­‰å±¬æ–¼é›£ä»¥ç›´æ¥é‡åŒ–ä½†æœ‰åƒ¹å€¼çš„ç„¡å½¢æ•ˆç›Šã€‚" },
                            { text: "æé«˜äº†ç”¢å“çš„åˆæ ¼æ•¸é‡ã€‚", isCorrect: false, rationale: "å±¬æ–¼æœ‰å½¢æ•ˆç›Šã€‚" },
                            { text: "æ¸›å°‘äº†æ©Ÿå°çš„ç¶­è­·æ¬¡æ•¸ã€‚", isCorrect: false, rationale: "å±¬æ–¼æœ‰å½¢æ•ˆç›Šï¼ˆç¶­è­·æˆæœ¬é™ä½ï¼‰ã€‚" }
                        ]
                    }
                ]
            },
            {
                id: 8, name: "æ¨™æº–åŒ– (Standardization)",
                quiz: [
                    {
                        question: "åœˆæœƒæˆåŠŸæ”¹å–„äº†æŸé …ä½œæ¥­æµç¨‹ï¼Œä½†æœªæ›´æ–°æ¨™æº–ä½œæ¥­æŒ‡å°æ›¸ (SOP)ã€‚é€™æœ€å¯èƒ½å°è‡´çš„å¾Œæœæ˜¯ï¼Ÿ",
                        options: [
                            { text: "ç„¡æ³•è¨ˆç®—æ”¹å–„ç‡ã€‚", isCorrect: false, rationale: "æ”¹å–„ç‡å·²åœ¨æ•ˆæœç¢ºèªæ­¥é©Ÿè¨ˆç®—ã€‚" },
                            { text: "å•é¡Œå†åº¦ç™¼ç”Ÿï¼ˆå†ç™¼ï¼‰ï¼Œå› ç‚ºæ–°èˆŠä½œæ¥­æ–¹å¼ä¸¦è¡Œä¸”ç¼ºä¹åˆ¶åº¦ä¿éšœã€‚", isCorrect: true, rationale: "æ¨™æº–åŒ–çš„ç›®çš„å°±æ˜¯é€šéåˆ¶åº¦åŒ–é˜²æ­¢å•é¡Œå†ç™¼ã€‚" },
                            { text: "ç¸½çµèˆ‡åçœæ­¥é©Ÿå°‡æœƒå¤±æ•—ã€‚", isCorrect: false, rationale: "ç¸½çµèˆ‡åçœä»å¯é€²è¡Œï¼Œä½†å…¶åƒ¹å€¼æœƒé™ä½ã€‚" },
                            { text: "ç„¡æ³•æ©«å‘å±•é–‹è‡³å…¶ä»–éƒ¨é–€ã€‚", isCorrect: false, rationale: "é›–ç„¶æœƒé˜»ç¤™æ©«å‘å±•é–‹ï¼Œä½†ã€å•é¡Œå†ç™¼ã€æ˜¯æ›´ç›´æ¥çš„é¢¨éšªã€‚" }
                        ]
                    },
                    {
                        question: "ã€æ©«å‘å±•é–‹ã€çš„ä¸»è¦ç›®çš„æ˜¯ä»€éº¼ï¼Ÿ",
                        options: [
                            { text: "å°‡æœªå®Œæˆçš„å°ç­–äº¤ç”±å…¶ä»–éƒ¨é–€æ¥çºŒå®Œæˆã€‚", isCorrect: false, rationale: "æ‡‰ç”±åŸåœˆæœƒå®Œæˆã€‚" },
                            { text: "è©•ä¼°æœ¬æœŸæ´»å‹•çš„ç„¡å½¢æ•ˆç›Šã€‚", isCorrect: false, rationale: "ç„¡å½¢æ•ˆç›Šå·²åœ¨æ•ˆæœç¢ºèªä¸­è©•ä¼°ã€‚" },
                            { text: "å°‡æœ¬æ¬¡æˆåŠŸçš„æ”¹å–„ç¶“é©—æˆ–æ–°SOPæ¨å»£åˆ°å…¶ä»–é¡ä¼¼çš„ç”¢å“ã€è£½ç¨‹æˆ–éƒ¨é–€ï¼Œæ“´å¤§æ•ˆç›Šã€‚", isCorrect: true, rationale: "æ©«å‘å±•é–‹æ—¨åœ¨æ“´å¤§æˆåŠŸç¶“é©—çš„æ‡‰ç”¨ç¯„åœã€‚" },
                            { text: "å»ºç«‹æ¨™æº–åŒ–æ–‡ä»¶çš„å¯©æ ¸æ©Ÿåˆ¶ã€‚", isCorrect: false, rationale: "é€™æ˜¯åˆ¶åº¦åŒ–çš„ä¸€éƒ¨åˆ†ã€‚" }
                        ]
                    }
                ]
            },
            {
                id: 9, name: "ç¸½çµèˆ‡åçœ (Conclusion & Reflection)",
                quiz: [
                    {
                        question: "QCC æ´»å‹•çµæŸå¾Œï¼Œåœˆæœƒç™¼ç¾æœ€çµ‚æ”¹å–„ç‡åƒ…é”ç›®æ¨™çš„ 70%ã€‚åœ¨ç¸½çµèˆ‡åçœæ­¥é©Ÿä¸­ï¼Œæœ€é—œéµçš„è¡Œå‹•æ˜¯ä»€éº¼ï¼Ÿ",
                        options: [
                            { text: "å°‡æœªé”æ¨™éƒ¨åˆ†æ­¸å’æ–¼å®¢è§€ç’°å¢ƒæˆ–å¤–éƒ¨å› ç´ ã€‚", isCorrect: false, rationale: "æ‡‰é€²è¡Œèª å¯¦åçœï¼Œæ‰¾å‡ºå…§éƒ¨åŸå› ã€‚" },
                            { text: "å…·é«”åˆ†ææœªé”æ¨™çš„ã€åŸå› ã€ï¼Œä¸¦æå‡ºä¸‹ä¸€æœŸ QCC çš„æ¥çºŒä¸»é¡Œæˆ–è¡Œå‹•è¨ˆç•«ã€‚", isCorrect: true, rationale: "æ­¤èˆ‰é«”ç¾äº† PDCA å¾ªç’°çš„ã€Aã€ï¼ˆè™•ç½®ï¼‰å’Œè¦åŠƒä¸‹ä¸€å¾ªç’°çš„ç²¾ç¥ã€‚" },
                            { text: "ç›´æ¥å°‡æˆæœè¦–ç‚ºå·²é”æˆç›®æ¨™ï¼Œé¿å…å ±å‘Šä¸å®Œæ•´ã€‚", isCorrect: false, rationale: "é€™é•åäº†èª å¯¦åŸå‰‡ï¼Œå½±éŸ¿å¾ŒçºŒç®¡ç†æ±ºç­–ã€‚" },
                            { text: "ç«‹å³å›åˆ°æ•ˆæœç¢ºèªæ­¥é©Ÿé‡æ–°æ¡é›†æ•¸æ“šã€‚", isCorrect: false, rationale: "æ‡‰æ¥å—ç¾æœ‰çµæœä¸¦é€²è¡Œåæ€èˆ‡è¦åŠƒã€‚" }
                        ]
                    },
                    {
                        question: "PDCA å¾ªç’°çš„æœ€å¾Œä¸€å€‹éšæ®µã€Aã€ï¼ˆActï¼Œè™•ç½®ï¼‰åœ¨ QCC ç¸½çµèˆ‡åçœä¸­ï¼Œä¸»è¦é«”ç¾åœ¨å“ªå…©å€‹æ–¹é¢ï¼Ÿ",
                        options: [
                            { text: "ä¸»é¡Œé¸å®šå’Œç¾ç‹€æŠŠæ¡ã€‚", isCorrect: false, rationale: "é€™æ˜¯ä¸‹ä¸€æœŸ QCC çš„ P éšæ®µã€‚" },
                            { text: "å°ç­–å¯¦æ–½å’Œæ•ˆæœç¢ºèªã€‚", isCorrect: false, rationale: "é€™æ˜¯ D å’Œ C éšæ®µã€‚" },
                            { text: "æ¨™æº–åŒ–å’Œå°ç­–å¯¦æ–½ã€‚", isCorrect: false, rationale: "æ¨™æº–åŒ–æ˜¯å‰ä¸€éšæ®µï¼Œå¯¦æ–½æ˜¯ D éšæ®µã€‚" },
                            { text: "å°‡æˆåŠŸçš„å°ç­–é€²è¡Œã€æ¨™æº–åŒ–ã€ï¼Œä¸¦å°æœªè§£æ±ºçš„å•é¡Œæå‡ºã€ä¸‹ä¸€æœŸè¡Œå‹•è¨ˆç•«ã€ã€‚", isCorrect: true, rationale: "è™•ç½®çš„å…©å¤§æ ¸å¿ƒï¼šå›ºåŒ–æˆåŠŸï¼ˆæ¨™æº–åŒ–ï¼‰å’Œè¦åŠƒä¸‹ä¸€è¼ªæ”¹é€²ï¼ˆä¸‹ä¸€æœŸè¨ˆç•«ï¼‰ã€‚" }
                        ]
                    }
                ]
            },
        ];

        // æŠŠæ‰€æœ‰é¡Œç›®æ”¤å¹³æˆä¸€å€‹é™£åˆ—
        const ALL_QUIZ_QUESTIONS = QCC_STEPS.flatMap(step =>
            step.quiz.map(q => ({
                ...q,
                stepName: `${step.id}. ${step.name}`,
            }))
        );

        let currentQuestionIndex = -1;
        let userScore = 0;
        let quizInProgress = false;
        let answerSelected = false;
        let stepPerformance = {};

        // UI å…ƒç´ 
        const questionContainer = document.getElementById('question-container');
        const quizQuestion = document.getElementById('quiz-question');
        const quizOptions = document.getElementById('quiz-options');
        const quizFeedback = document.getElementById('quiz-feedback');
        const mainActionBtn = document.getElementById('main-action-btn');
        const stepNameDisplay = document.getElementById('step-name');
        const questionIndexDisplay = document.getElementById('question-index');
        const totalQuestionsDisplay = document.getElementById('total-questions');
        const progressBar = document.getElementById('progress-bar');

        function updateProgressDisplay() {
            const total = ALL_QUIZ_QUESTIONS.length;
            const current = currentQuestionIndex + 1;

            totalQuestionsDisplay.textContent = total;
            questionIndexDisplay.textContent = current > total ? total : current;

            if (currentQuestionIndex >= 0 && currentQuestionIndex < total) {
                const currentQ = ALL_QUIZ_QUESTIONS[currentQuestionIndex];
                stepNameDisplay.textContent = currentQ.stepName;
                const percentage = (current / total) * 100;
                progressBar.style.width = `${percentage}%`;
            } else {
                stepNameDisplay.textContent = 'æ¸¬é©—å®Œæˆï¼';
                progressBar.style.width = '100%';
            }
        }

        function renderQuestion() {
            if (currentQuestionIndex >= ALL_QUIZ_QUESTIONS.length) {
                showQuizResults();
                return;
            }

            quizInProgress = true;
            answerSelected = false;

            const currentQ = ALL_QUIZ_QUESTIONS[currentQuestionIndex];

            updateProgressDisplay();
            mainActionBtn.disabled = true;
            mainActionBtn.textContent = 'è«‹å…ˆé¸æ“‡ç­”æ¡ˆ';
            quizFeedback.classList.add('hidden');
            quizFeedback.className = 'mb-6 p-4 rounded-xl text-white font-bold hidden text-base sm:text-lg shadow-lg';

            questionContainer.className = 'bg-teal-50 border-2 border-teal-200 p-5 sm:p-6 rounded-2xl shadow-inner mb-6';

            quizQuestion.innerHTML = `<span class="text-teal-600 font-black mr-2">${currentQuestionIndex + 1}.</span> ${currentQ.question}`;

            quizOptions.innerHTML = '';
            currentQ.options.forEach((option, index) => {
                const optionDiv = document.createElement('div');
                const optionChar = String.fromCharCode(65 + index);
                optionDiv.className = 'answer-option p-4 border-2 border-gray-200 rounded-2xl bg-white text-gray-700';
                optionDiv.innerHTML = `<span class="font-bold mr-2">${optionChar}.</span> ${option.text}`;
                optionDiv.setAttribute('data-index', index);
                optionDiv.addEventListener('click', handleAnswerSelect);
                quizOptions.appendChild(optionDiv);
            });
        }

        function handleAnswerSelect(event) {
            if (answerSelected) return;

            answerSelected = true;
            const selectedOptionDiv = event.currentTarget;
            const selectedIndex = parseInt(selectedOptionDiv.getAttribute('data-index'));
            const currentQ = ALL_QUIZ_QUESTIONS[currentQuestionIndex];
            const isCorrect = currentQ.options[selectedIndex].isCorrect;
            const rationale = currentQ.options[selectedIndex].rationale;
            const stepKey = currentQ.stepName;

            Array.from(quizOptions.children).forEach(option => {
                option.removeEventListener('click', handleAnswerSelect);
                option.style.cursor = 'default';
                option.classList.add('selected');
            });

            quizFeedback.classList.remove('hidden');
            quizFeedback.textContent = `ğŸ’¡ ç­”æ¡ˆè§£æï¼š${rationale}`;
            mainActionBtn.disabled = false;
            mainActionBtn.textContent = (currentQuestionIndex < ALL_QUIZ_QUESTIONS.length - 1) ? 'ä¸‹ä¸€é¡Œ' : 'æŸ¥çœ‹çµæœ';

            if (isCorrect) {
                userScore++;
                if (stepPerformance[stepKey]) {
                    stepPerformance[stepKey].correct++;
                }

                quizFeedback.classList.add('bg-teal-600');
                selectedOptionDiv.classList.add('correct-answer', 'text-teal-900');
                selectedOptionDiv.innerHTML =
                    `<span class="font-black text-teal-900 mr-2">âœ… ${String.fromCharCode(65 + selectedIndex)}.</span> ${currentQ.options[selectedIndex].text}`;
            } else {
                quizFeedback.classList.add('bg-rose-500');
                selectedOptionDiv.classList.add('incorrect-answer', 'text-rose-900');
                selectedOptionDiv.innerHTML =
                    `<span class="font-black text-rose-900 mr-2">âŒ ${String.fromCharCode(65 + selectedIndex)}.</span> ${currentQ.options[selectedIndex].text}`;

                const correctOptionIndex = currentQ.options.findIndex(opt => opt.isCorrect);
                quizOptions.children[correctOptionIndex].classList.add('correct-answer', 'text-teal-900');
                quizOptions.children[correctOptionIndex].innerHTML =
                    `<span class="font-black text-teal-900 mr-2">âœ… ${String.fromCharCode(65 + correctOptionIndex)}.</span> ${currentQ.options[correctOptionIndex].text}`;
            }
        }

        function handleMainAction() {
            if (!quizInProgress) {
                currentQuestionIndex = 0;
                renderQuestion();
            } else if (currentQuestionIndex < ALL_QUIZ_QUESTIONS.length) {
                currentQuestionIndex++;
                renderQuestion();
            } else {
                showQuizResults();
            }
        }

        function showQuizResults() {
            quizInProgress = false;

            const total = ALL_QUIZ_QUESTIONS.length;
            const percentage = Math.round((userScore / total) * 100);

            let resultMessage = `æ­å–œæ‚¨å®Œæˆæ‰€æœ‰ ${total} é¡Œæ¸¬é©—ï¼`;
            let resultEmotion = 'ğŸ‰';

            if (percentage >= 80) {
                resultMessage += ' çŸ¥è­˜æŒæ¡åº¦æ¥µä½³ï¼Œæ˜¯ QCC å°ˆå®¶ï¼';
                resultEmotion = 'ğŸ†';
            } else if (percentage >= 60) {
                resultMessage += ' æŒæ¡åº¦è‰¯å¥½ï¼Œç¹¼çºŒåŠ æ²¹ï¼';
                resultEmotion = 'ğŸ‘';
            } else {
                resultMessage += ' ä»éœ€åŠ å¼·æ ¸å¿ƒæ¦‚å¿µï¼Œåˆ¥ç°å¿ƒï¼Œå¯ä»¥å›é¦–é è¤‡ç¿’å†ä¾†æŒ‘æˆ°ï¼';
                resultEmotion = 'ğŸ“š';
            }

            quizOptions.innerHTML = '';
            quizFeedback.classList.add('hidden');
            mainActionBtn.textContent = 'é‡æ–°é–‹å§‹';
            mainActionBtn.disabled = false;

            let weakestSteps = [];
            let minScore = 101;

            for (const stepName in stepPerformance) {
                const data = stepPerformance[stepName];
                const score = data.total > 0 ? Math.round((data.correct / data.total) * 100) : 0;
                data.score = score;

                if (score < minScore) {
                    minScore = score;
                    weakestSteps = [stepName];
                } else if (score === minScore) {
                    weakestSteps.push(stepName);
                }
            }

            let analysisHTML = '';
            if (minScore < 100) {
                const weakestStepsList = weakestSteps.map(step =>
                    `<span class="text-rose-600 font-black">${step}ï¼ˆ${stepPerformance[step].score}%ï¼‰</span>`
                ).join('ã€');

                let suggestion = '';
                if (weakestSteps.length === 1) {
                    suggestion = `å»ºè­°å›åˆ°ä¸»ç¶²ç«™ä¸­ã€Œ${weakestSteps[0]}ã€ç›¸é—œå€å¡Šæ­é…é–±è®€ï¼Œå†é‡æ–°æŒ‘æˆ°ã€‚`;
                } else {
                    suggestion = `å¯ä»¥å„ªå…ˆé‡å°ä¸Šè¿°æ­¥é©Ÿä¸­åˆ†æ•¸è¼ƒä½çš„ç« ç¯€å›åˆ°é¦–é è¤‡ç¿’ï¼Œåƒæ˜¯ï¼š<strong class="text-teal-700">${weakestSteps[0]}</strong>ã€‚`;
                }

                analysisHTML = `
                    <div class="mt-6 p-4 sm:p-5 rounded-2xl border-2 border-rose-300 bg-rose-50 shadow-inner text-left">
                        <h3 class="text-xl sm:text-2xl font-black text-rose-600 mb-2 flex items-center">
                            <span class="mr-2 text-2xl sm:text-3xl">ğŸ”</span> å¼±é»åˆ†æèˆ‡å»ºè­°
                        </h3>
                        <p class="text-gray-800 text-base sm:text-lg leading-relaxed mb-2">
                            åœ¨æœ¬æ¬¡æ¸¬é©—ä¸­ï¼Œæ‚¨çš„<strong>æœ€ä½å¾—åˆ†</strong>è½åœ¨ï¼š${weakestStepsList}ã€‚
                        </p>
                        <p class="text-gray-800 text-base sm:text-lg leading-relaxed">
                            ${suggestion}
                        </p>
                    </div>
                `;
            } else if (minScore === 100) {
                analysisHTML = `
                    <div class="mt-6 p-4 sm:p-5 rounded-2xl border-2 border-teal-300 bg-teal-50 shadow-inner text-left">
                        <h3 class="text-xl sm:text-2xl font-black text-teal-700 mb-2 flex items-center">
                            <span class="mr-2 text-2xl sm:text-3xl">ğŸ¥‡</span> è¡¨ç¾æ¥µä½³ï¼
                        </h3>
                        <p class="text-gray-800 text-base sm:text-lg leading-relaxed">
                            æ‚¨åœ¨æ‰€æœ‰ QCC æ­¥é©Ÿçš„å¾—åˆ†å‡ç‚º 100%ã€‚æ­å–œæ‚¨å° QCC ä¹å¤§æ­¥é©Ÿå·²éå¸¸ç†Ÿæ‚‰ï¼Œå¯ä»¥æŒ‘æˆ°æ›´é«˜éšçš„æ¡ˆä¾‹å¯¦ä½œï¼
                        </p>
                    </div>
                `;
            }

            questionContainer.className = 'bg-white border-2 border-gray-200 p-5 sm:p-6 rounded-2xl shadow-lg mb-6';
            quizQuestion.innerHTML = `
                <div class="text-center">
                    <div class="text-5xl sm:text-6xl mb-3">${resultEmotion}</div>
                    <h2 class="text-2xl sm:text-3xl font-black text-teal-700 mb-2">${resultMessage}</h2>
                    <p class="text-3xl sm:text-4xl font-extrabold text-emerald-600">å¾—åˆ†ï¼š${userScore} / ${total}</p>
                    <p class="text-xl sm:text-2xl font-bold text-gray-700 mt-1">æ­£ç¢ºç‡ï¼š${percentage}%</p>
                </div>
                ${analysisHTML}
            `;

            mainActionBtn.removeEventListener('click', handleMainAction);
            mainActionBtn.addEventListener('click', initializeQuiz);
        }

        function initializeQuiz() {
            currentQuestionIndex = -1;
            userScore = 0;
            quizInProgress = false;
            stepPerformance = {};

            QCC_STEPS.forEach(step => {
                stepPerformance[`${step.id}. ${step.name}`] = {
                    correct: 0,
                    total: step.quiz.length
                };
            });

            questionContainer.className = 'bg-teal-50 border-2 border-teal-200 p-5 sm:p-6 rounded-2xl shadow-inner mb-6';
            quizQuestion.innerHTML = 'é»æ“Šä¸‹æ–¹æŒ‰éˆ•é–‹å§‹æ¸¬é©—ï¼';
            quizOptions.innerHTML = '';
            quizFeedback.classList.add('hidden');
            mainActionBtn.textContent = 'é–‹å§‹æ¸¬é©—ï¼';
            mainActionBtn.disabled = false;

            updateProgressDisplay();

            mainActionBtn.removeEventListener('click', initializeQuiz);
            mainActionBtn.addEventListener('click', handleMainAction);
        }

        // â­ ç›´æ¥åœ¨è…³æœ¬è¼‰å…¥å¾Œåˆå§‹åŒ–ï¼ˆé¿å…ä¾è³´ window.onloadï¼Œæ–¹ä¾¿è¢« index.html ç”¨ fetch è¼‰å…¥ï¼‰
        initializeQuiz();
    </script>
</body>
</html>
